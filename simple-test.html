<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç - –ê–≤—Ç–æ–ó–∞–ø—á–∞—Å—Ç–∏</title>
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="components.css">
    <link rel="stylesheet" href="animations.css">
    <style>
        .test-container {
            padding: 20px;
            max-width: 600px;
            margin: 0 auto;
        }
        .test-section {
            background: var(--bg-card);
            padding: 20px;
            margin: 20px 0;
            border-radius: 12px;
            border: 1px solid var(--border-color);
        }
        .test-button {
            background: var(--primary-gradient);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            margin: 5px;
        }
        .test-result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 6px;
        }
        .success { background: rgba(76, 175, 80, 0.2); color: #4caf50; }
        .error { background: rgba(244, 67, 54, 0.2); color: #f44336; }
        .info { background: rgba(33, 150, 243, 0.2); color: #2196f3; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üß™ –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç –ê–≤—Ç–æ–ó–∞–ø—á–∞—Å—Ç–∏</h1>
        
        <div class="test-section">
            <h3>1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥—É–ª–µ–π</h3>
            <button class="test-button" onclick="testModules()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–æ–¥—É–ª–∏</button>
            <div id="modules-result"></div>
        </div>
        
        <div class="test-section">
            <h3>2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö</h3>
            <button class="test-button" onclick="testData()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
            <div id="data-result"></div>
        </div>
        
        <div class="test-section">
            <h3>3. –ü—Ä–æ–≤–µ—Ä–∫–∞ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤</h3>
            <button class="test-button" onclick="testUI()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å UI</button>
            <div id="ui-result"></div>
        </div>
        
        <div class="test-section">
            <h3>4. –ü—Ä–æ–≤–µ—Ä–∫–∞ Telegram API</h3>
            <button class="test-button" onclick="testTelegram()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å Telegram API</button>
            <div id="telegram-result"></div>
        </div>
        
        <div class="test-section">
            <h3>5. –ó–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</h3>
            <button class="test-button" onclick="testMainApp()">–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</button>
            <div id="main-result"></div>
        </div>
    </div>

    <!-- –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–∫—Ä–∏–ø—Ç—ã -->
    <script src="data.js"></script>
    <script src="telegram-api.js"></script>
    <script src="components.js"></script>
    <script src="optimization.js"></script>
    <script src="app.js"></script>
    
    <script>
        function showResult(elementId, message, type = 'info') {
            const element = document.getElementById(elementId);
            element.innerHTML = `<div class="test-result ${type}">${message}</div>`;
        }

        function testModules() {
            let results = [];
            
            if (typeof DataService !== 'undefined') {
                results.push('‚úÖ DataService –∑–∞–≥—Ä—É–∂–µ–Ω');
            } else {
                results.push('‚ùå DataService –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω');
            }
            
            if (typeof telegramAPI !== 'undefined') {
                results.push('‚úÖ telegramAPI –∑–∞–≥—Ä—É–∂–µ–Ω');
            } else {
                results.push('‚ùå telegramAPI –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω');
            }
            
            if (typeof uiComponents !== 'undefined') {
                results.push('‚úÖ uiComponents –∑–∞–≥—Ä—É–∂–µ–Ω');
            } else {
                results.push('‚ùå uiComponents –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω');
            }
            
            if (typeof performanceOptimizer !== 'undefined') {
                results.push('‚úÖ performanceOptimizer –∑–∞–≥—Ä—É–∂–µ–Ω');
            } else {
                results.push('‚ùå performanceOptimizer –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω');
            }
            
            if (typeof app !== 'undefined') {
                results.push('‚úÖ app –∑–∞–≥—Ä—É–∂–µ–Ω');
            } else {
                results.push('‚ùå app –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω');
            }
            
            const successCount = results.filter(r => r.includes('‚úÖ')).length;
            const totalCount = results.length;
            
            showResult('modules-result', 
                results.join('<br>') + 
                `<br><strong>–†–µ–∑—É–ª—å—Ç–∞—Ç: ${successCount}/${totalCount} –º–æ–¥—É–ª–µ–π –∑–∞–≥—Ä—É–∂–µ–Ω–æ</strong>`,
                successCount === totalCount ? 'success' : 'error'
            );
        }

        function testData() {
            try {
                const categories = DataService.getCategories();
                const products = DataService.getProductsByCategory('engine');
                const userProfile = DataService.getUserProfile();
                
                showResult('data-result', 
                    `‚úÖ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏: ${categories.length}<br>` +
                    `‚úÖ –¢–æ–≤–∞—Ä—ã –¥–≤–∏–≥–∞—Ç–µ–ª—è: ${products.length}<br>` +
                    `‚úÖ –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: ${userProfile ? '–∑–∞–≥—Ä—É–∂–µ–Ω' : '–Ω–µ –Ω–∞–π–¥–µ–Ω'}`,
                    'success'
                );
            } catch (error) {
                showResult('data-result', `‚ùå –û—à–∏–±–∫–∞ –¥–∞–Ω–Ω—ã—Ö: ${error.message}`, 'error');
            }
        }

        function testUI() {
            try {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ uiComponents –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
                if (uiComponents && uiComponents.cart) {
                    showResult('ui-result', 
                        `‚úÖ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã<br>` +
                        `‚úÖ –ö–æ—Ä–∑–∏–Ω–∞: ${uiComponents.cart.length} —Ç–æ–≤–∞—Ä–æ–≤`,
                        'success'
                    );
                } else {
                    showResult('ui-result', '‚ùå UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã', 'error');
                }
            } catch (error) {
                showResult('ui-result', `‚ùå –û—à–∏–±–∫–∞ UI: ${error.message}`, 'error');
            }
        }

        function testTelegram() {
            try {
                if (telegramAPI) {
                    const isTelegram = telegramAPI.isTelegram();
                    const user = telegramAPI.getUser();
                    
                    showResult('telegram-result', 
                        `‚úÖ Telegram API –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω<br>` +
                        `‚úÖ –í Telegram: ${isTelegram ? '–î–∞' : '–ù–µ—Ç (–¥–µ–º–æ-—Ä–µ–∂–∏–º)'}<br>` +
                        `‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${user ? user.first_name : '–ù–µ –Ω–∞–π–¥–µ–Ω'}`,
                        'success'
                    );
                } else {
                    showResult('telegram-result', '‚ùå Telegram API –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω', 'error');
                }
            } catch (error) {
                showResult('telegram-result', `‚ùå –û—à–∏–±–∫–∞ Telegram API: ${error.message}`, 'error');
            }
        }

        function testMainApp() {
            try {
                if (app) {
                    const stats = app.getAppStats();
                    
                    showResult('main-result', 
                        `‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ<br>` +
                        `‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞: ${app.isLoading ? '–í –ø—Ä–æ—Ü–µ—Å—Å–µ' : '–ó–∞–≤–µ—Ä—à–µ–Ω–∞'}<br>` +
                        `‚úÖ –ö–æ—Ä–∑–∏–Ω–∞: ${stats.cartItems} —Ç–æ–≤–∞—Ä–æ–≤<br>` +
                        `‚úÖ –ò–∑–±—Ä–∞–Ω–Ω–æ–µ: ${stats.favoritesCount} —Ç–æ–≤–∞—Ä–æ–≤`,
                        'success'
                    );
                } else {
                    showResult('main-result', '‚ùå –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ', 'error');
                }
            } catch (error) {
                showResult('main-result', `‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: ${error.message}`, 'error');
            }
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', () => {
            setTimeout(() => {
                testModules();
                testData();
                testUI();
                testTelegram();
                testMainApp();
            }, 1000);
        });
    </script>
</body>
</html> 