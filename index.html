<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>АвтоЗапчасти63</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- Современные шрифты -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Lottie для сложных анимаций -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
    <!-- Библиотека для красивых эффектов -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <!-- Phosphor Icons - современные иконки -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <!-- Стили -->
    <link rel="stylesheet" href="main.css">
</head>
<body class="theme-auto">
    <!-- Экран загрузки -->
    <div id="loading-screen" class="loading-screen">
        <div id="loading-animation"></div>
        <div class="loading-text">AUTO63</div>
    </div>

    <!-- Основное приложение -->
    <div id="app" class="app">
        <!-- Навигация -->
        <nav class="nav-bar glass-effect">
            <div class="nav-left">
                <button class="nav-btn btn-back ripple-effect">
                    <i class="ph ph-arrow-left"></i>
                </button>
                <div class="nav-title gradient-text">АвтоЗапчасти63</div>
            </div>
            <div class="nav-right">
                <button class="nav-btn ripple-effect" data-screen="search">
                    <i class="ph ph-magnifying-glass"></i>
                </button>
                <button class="nav-btn ripple-effect" data-screen="cart">
                    <i class="ph ph-shopping-cart"></i>
                    <span class="badge pulse-effect" id="cart-badge">0</span>
                </button>
                <button class="nav-btn ripple-effect" data-screen="profile">
                    <i class="ph ph-user"></i>
                </button>
            </div>
        </nav>

        <!-- Основной контент -->
        <main class="main">
            <!-- Домашний экран -->
            <section id="home-screen" class="screen active">
                <!-- Hero секция -->
                <div class="hero glass-morphism">
                    <div class="hero-content">
                        <h1 class="gradient-text animate-text">Оригинальные запчасти для вашего авто</h1>
                        <div class="hero-features">
                            <div class="feature-card">
                                <i class="ph ph-currency-circle-dollar"></i>
                                <span>Лучшие цены</span>
                            </div>
                            <div class="feature-card">
                                <i class="ph ph-truck"></i>
                                <span>Быстрая доставка</span>
                            </div>
                            <div class="feature-card">
                                <i class="ph ph-shield-check"></i>
                                <span>Гарантия качества</span>
                            </div>
                        </div>
                    </div>
                    <div class="hero-background">
                        <div id="particles-js"></div>
                    </div>
                </div>

                <!-- Поиск -->
                <div class="search-bar glass-effect">
                    <i class="ph ph-magnifying-glass"></i>
                    <input type="text" placeholder="Поиск по артикулу или названию" class="search-input">
                    <button class="search-btn gradient-btn">
                        <i class="ph ph-arrow-right"></i>
                    </button>
                </div>

                <!-- VIN-поиск -->
                <div class="vin-search glass-morphism">
                    <div class="vin-icon">
                        <i class="ph ph-car"></i>
                    </div>
                    <div class="vin-content">
                        <h3>Поиск по VIN</h3>
                        <p>Найдите точные запчасти для вашего авто</p>
                    </div>
                    <button class="btn-outline-gradient">
                        <span>Найти</span>
                        <i class="ph ph-scan"></i>
                    </button>
                </div>

                <!-- Категории -->
                <div class="categories-section">
                    <div class="section-header">
                        <h2 class="gradient-text">Категории запчастей</h2>
                        <button class="btn-text">Все категории <i class="ph ph-arrow-right"></i></button>
                    </div>
                    <div class="categories-grid" id="categories">
                        <!-- Категории будут добавлены через JavaScript -->
                    </div>
                </div>

                <!-- Популярные товары -->
                <div class="products-section">
                    <div class="section-header">
                        <h2 class="gradient-text">Популярные товары</h2>
                        <div class="filter-chips">
                            <button class="chip active">Все</button>
                            <button class="chip">Новинки</button>
                            <button class="chip">Со скидкой</button>
                        </div>
                    </div>
                    <div class="products-grid" id="products">
                        <!-- Товары будут добавлены через JavaScript -->
                    </div>
                </div>
            </section>

            <!-- Экран товара -->
            <section id="product-screen" class="screen">
                <!-- Контент будет добавлен через JavaScript -->
            </section>

            <!-- Корзина -->
            <section id="cart-screen" class="screen">
                <!-- Контент будет добавлен через JavaScript -->
            </section>

            <!-- Профиль -->
            <section id="profile-screen" class="screen">
                <!-- Контент будет добавлен через JavaScript -->
            </section>
        </main>
    </div>

    <!-- Частицы для фона -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    
    <script>
        // Инициализация Lottie анимации загрузки
        const loadingAnimation = lottie.loadAnimation({
            container: document.getElementById('loading-animation'),
            renderer: 'svg',
            loop: true,
            autoplay: true,
            path: 'https://assets5.lottiefiles.com/packages/lf20_UJNc2t.json'
        });

        // Инициализация частиц
        particlesJS('particles-js', {
            particles: {
                number: { value: 80 },
                color: { value: '#ffffff' },
                opacity: { value: 0.5 },
                size: { value: 3 },
                line_linked: {
                    enable: true,
                    distance: 150,
                    color: '#ffffff',
                    opacity: 0.4,
                    width: 1
                },
                move: {
                    enable: true,
                    speed: 2
                }
            }
        });

        // Инициализация приложения
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                window.Telegram.WebApp.ready();
                window.Telegram.WebApp.expand();

                // Загружаем компоненты
                const scripts = ['data.js', 'Cart.js', 'Profile.js', 'Checkout.js', 'app.js'];
                for (const script of scripts) {
                    await new Promise((resolve, reject) => {
                        const s = document.createElement('script');
                        s.src = script;
                        s.onload = resolve;
                        s.onerror = reject;
                        document.body.appendChild(s);
                    });
                }

                // Инициализируем GSAP анимации
                gsap.from('.hero-content', {
                    duration: 1,
                    y: 50,
                    opacity: 0,
                    ease: 'power3.out'
                });

                // Эффект ripple для кнопок
                document.querySelectorAll('.ripple-effect').forEach(button => {
                    button.addEventListener('click', function(e) {
                        const ripple = document.createElement('span');
                        ripple.classList.add('ripple');
                        this.appendChild(ripple);
                        
                        const rect = this.getBoundingClientRect();
                        const size = Math.max(rect.width, rect.height);
                        const x = e.clientX - rect.left - size/2;
                        const y = e.clientY - rect.top - size/2;
                        
                        ripple.style.width = ripple.style.height = `${size}px`;
                        ripple.style.left = `${x}px`;
                        ripple.style.top = `${y}px`;
                        
                        setTimeout(() => ripple.remove(), 600);
                    });
                });

            } catch (error) {
                console.error('Ошибка инициализации:', error);
            }
        });
    </script>
</body>
</html>