<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–≤—Ç–æ–ó–∞–ø—á–∞—Å—Ç–∏ - Telegram MiniApp</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="components.css">
    <link rel="stylesheet" href="animations.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-container">
            <div class="engine-assembly">
                <div class="part part-1"></div>
                <div class="part part-2"></div>
                <div class="part part-3"></div>
                <div class="part part-4"></div>
            </div>
            <div class="loading-text">
                <h2>–ê–≤—Ç–æ–ó–∞–ø—á–∞—Å—Ç–∏</h2>
                <p>–°–±–æ—Ä–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤...</p>
            </div>
            <div class="loading-progress">
                <div class="loading-progress-bar"></div>
            </div>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="app" class="app-container">
        <!-- Navigation -->
        <nav class="nav-bar">
            <div class="nav-content">
                <div class="nav-brand">
                    <h1>–ê–≤—Ç–æ–ó–∞–ø—á–∞—Å—Ç–∏</h1>
                </div>
                <div class="nav-actions">
                    <button id="search-btn" class="nav-btn" data-screen="search">
                        <span class="icon">üîç</span>
                    </button>
                    <button id="cart-btn" class="nav-btn" data-screen="cart">
                        <span class="icon">üõí</span>
                        <span id="cart-count" class="cart-count">0</span>
                    </button>
                    <button id="profile-btn" class="nav-btn" data-screen="profile">
                        <span class="icon">üë§</span>
                    </button>
                </div>
            </div>
        </nav>

        <!-- Search Bar -->
        <div id="search-bar" class="search-bar" style="display: none;">
            <input type="text" id="search-input" placeholder="–ü–æ–∏—Å–∫ –∞–≤—Ç–æ–∑–∞–ø—á–∞—Å—Ç–µ–π...">
            <button id="search-close" class="search-close">‚úï</button>
        </div>

        <!-- Main Content -->
        <main id="main-content" class="main-content">
            <!-- Home Screen -->
            <div id="home-screen" class="screen active">
                <div class="welcome-banner">
                    <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –º–∏—Ä –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∞–≤—Ç–æ–∑–∞–ø—á–∞—Å—Ç–µ–π</h2>
                    <p>–ù–∞–π–¥–∏—Ç–µ –Ω—É–∂–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ –¥–ª—è –≤–∞—à–µ–≥–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—è</p>
                    <div class="quick-stats">
                        <div class="stat-item">
                            <span class="stat-number">150+</span>
                            <span class="stat-label">–¢–æ–≤–∞—Ä–æ–≤</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">4</span>
                            <span class="stat-label">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">24/7</span>
                            <span class="stat-label">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</span>
                        </div>
                    </div>
                </div>
                
                <div class="featured-section">
                    <h3>üî• –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</h3>
                    <div class="categories-grid">
                        <div class="category-card featured" data-category="engine">
                            <div class="category-icon">üîß</div>
                            <h3>–î–≤–∏–≥–∞—Ç–µ–ª—å</h3>
                            <p>–î–µ—Ç–∞–ª–∏ –¥–≤–∏–≥–∞—Ç–µ–ª—è –∏ —Å–∏—Å—Ç–µ–º—ã</p>
                            <div class="category-badge">–ü–æ–ø—É–ª—è—Ä–Ω–æ</div>
                        </div>
                        <div class="category-card" data-category="brakes">
                            <div class="category-icon">üõë</div>
                            <h3>–¢–æ—Ä–º–æ–∑–∞</h3>
                            <p>–¢–æ—Ä–º–æ–∑–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</p>
                        </div>
                        <div class="category-card" data-category="suspension">
                            <div class="category-icon">‚öôÔ∏è</div>
                            <h3>–ü–æ–¥–≤–µ—Å–∫–∞</h3>
                            <p>–ü–æ–¥–≤–µ—Å–∫–∞ –∏ —Ö–æ–¥–æ–≤–∞—è —á–∞—Å—Ç—å</p>
                        </div>
                        <div class="category-card" data-category="electronics">
                            <div class="category-icon">‚ö°</div>
                            <h3>–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞</h3>
                            <p>–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã</p>
                        </div>
                    </div>
                </div>

                <div class="quick-actions">
                    <h3>‚ö° –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
                    <div class="actions-grid">
                        <button class="action-btn" data-action="cart">
                            <span class="action-icon">üõí</span>
                            <span>–ö–æ—Ä–∑–∏–Ω–∞</span>
                        </button>
                        <button class="action-btn" data-action="profile">
                            <span class="action-icon">üë§</span>
                            <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
                        </button>
                        <button class="action-btn" data-action="orders">
                            <span class="action-icon">üìã</span>
                            <span>–ó–∞–∫–∞–∑—ã</span>
                        </button>
                        <button class="action-btn" data-action="search">
                            <span class="action-icon">üîç</span>
                            <span>–ü–æ–∏—Å–∫</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Category Products Screen -->
            <div id="category-screen" class="screen">
                <div class="screen-header">
                    <button class="btn-back">‚Üê –ù–∞–∑–∞–¥</button>
                    <h2 id="category-title">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</h2>
                </div>
                <div id="products-grid" class="products-grid"></div>
            </div>

            <!-- Product Detail Screen -->
            <div id="product-screen" class="screen">
                <div class="screen-header">
                    <button class="btn-back">‚Üê –ù–∞–∑–∞–¥</button>
                    <h2>–¢–æ–≤–∞—Ä</h2>
                </div>
                <div id="product-detail" class="product-detail"></div>
            </div>

            <!-- Cart Screen -->
            <div id="cart-screen" class="screen">
                <div class="screen-header">
                    <button class="btn-back">‚Üê –ù–∞–∑–∞–¥</button>
                    <h2>–ö–æ—Ä–∑–∏–Ω–∞</h2>
                </div>
                <div id="cart-items" class="cart-items"></div>
                <div class="cart-summary">
                    <div class="total">
                        <span>–ò—Ç–æ–≥–æ:</span>
                        <span id="cart-total">0 ‚ÇΩ</span>
                    </div>
                    <button id="checkout-btn" class="checkout-btn">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
                </div>
            </div>

            <!-- Checkout Screen -->
            <div id="checkout-screen" class="screen">
                <div class="screen-header">
                    <button class="btn-back">‚Üê –ù–∞–∑–∞–¥</button>
                    <h2>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>
                </div>
                <form id="checkout-form" class="checkout-form">
                    <div class="form-group">
                        <label for="name">–ò–º—è –ø–æ–ª—É—á–∞—Ç–µ–ª—è</label>
                        <input type="text" id="name" required>
                    </div>
                    <div class="form-group">
                        <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                        <input type="tel" id="phone" required>
                    </div>
                    <div class="form-group">
                        <label for="address">–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏</label>
                        <textarea id="address" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="delivery">–°–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏</label>
                        <select id="delivery" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–±</option>
                            <option value="courier">–ö—É—Ä—å–µ—Ä</option>
                            <option value="pickup">–°–∞–º–æ–≤—ã–≤–æ–∑</option>
                        </select>
                    </div>
                    <button type="submit" class="submit-btn">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑</button>
                </form>
            </div>

            <!-- Profile Screen -->
            <div id="profile-screen" class="screen">
                <div class="screen-header">
                    <button class="btn-back">‚Üê –ù–∞–∑–∞–¥</button>
                    <h2>–ü—Ä–æ—Ñ–∏–ª—å</h2>
                </div>
                <div class="profile-content">
                    <div class="profile-info">
                        <div class="profile-avatar">üë§</div>
                        <h3 id="user-name">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</h3>
                        <p id="user-phone">+7 (999) 123-45-67</p>
                    </div>
                    <div class="profile-menu">
                        <button class="profile-menu-item" data-action="orders">
                            <span class="icon">üìã</span>
                            <span>–ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤</span>
                        </button>
                        <button class="profile-menu-item" data-action="favorites">
                            <span class="icon">‚ù§Ô∏è</span>
                            <span>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
                        </button>
                        <button class="profile-menu-item" data-action="settings">
                            <span class="icon">‚öôÔ∏è</span>
                            <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Orders History Screen -->
            <div id="orders-screen" class="screen">
                <div class="screen-header">
                    <button class="btn-back">‚Üê –ù–∞–∑–∞–¥</button>
                    <h2>–ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤</h2>
                </div>
                <div id="orders-list" class="orders-list"></div>
            </div>
        </main>
    </div>

    <!-- Success Modal -->
    <div id="success-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="success-animation">‚úÖ</div>
            <h3>–ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω!</h3>
            <p>–í–∞—à –∑–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω. –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.</p>
            <button id="modal-close" class="modal-btn">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∫—É–ø–∫–∏</button>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
        window.logInitialization = function(message) {
            console.log(`[${new Date().toISOString()}] ${message}`);
        };
        
        window.logInitialization('–ù–∞—á–∞–ª–æ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤');
    </script>
    
    <script src="data.js"></script>
    <script>window.logInitialization('data.js –∑–∞–≥—Ä—É–∂–µ–Ω');</script>
    
    <script src="optimization.js"></script>
    <script>window.logInitialization('optimization.js –∑–∞–≥—Ä—É–∂–µ–Ω');</script>
    
    <script src="telegram-api.js"></script>
    <script>window.logInitialization('telegram-api.js –∑–∞–≥—Ä—É–∂–µ–Ω');</script>
    
    <script src="components.js"></script>
    <script>window.logInitialization('components.js –∑–∞–≥—Ä—É–∂–µ–Ω');</script>
    
    <script src="app.js"></script>
    <script>window.logInitialization('app.js –∑–∞–≥—Ä—É–∂–µ–Ω');</script>
    
    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        window.addEventListener('load', function() {
            window.logInitialization('–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏
            const loadingScreen = document.getElementById('loading-screen');
            const app = document.getElementById('app');
            
            if (loadingScreen && app) {
                loadingScreen.style.display = 'flex';
                app.style.display = 'none';
                window.logInitialization('–≠–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–∫–∞–∑–∞–Ω');
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –º–æ–¥—É–ª–µ–π
            window.logInitialization(`DataService –¥–æ—Å—Ç—É–ø–µ–Ω: ${!!window.DataService}`);
            window.logInitialization(`telegramAPI –¥–æ—Å—Ç—É–ø–µ–Ω: ${!!window.telegramAPI}`);
            window.logInitialization(`uiComponents –¥–æ—Å—Ç—É–ø–µ–Ω: ${!!window.uiComponents}`);
            window.logInitialization(`performanceOptimizer –¥–æ—Å—Ç—É–ø–µ–Ω: ${!!window.performanceOptimizer}`);
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
            if (window.DataService && window.telegramAPI && window.uiComponents && window.performanceOptimizer) {
                window.logInitialization('–í—Å–µ –º–æ–¥—É–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã, —Å–æ–∑–¥–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ');
                window.app = new AutoPartsApp();
            } else {
                window.logInitialization('–û–®–ò–ë–ö–ê: –ù–µ –≤—Å–µ –º–æ–¥—É–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã');
                if (loadingScreen) {
                    loadingScreen.innerHTML = `
                        <div class="error-message">
                            <h2>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</h2>
                            <p>–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã</p>
                            <p class="error-details">
                                DataService: ${!!window.DataService}<br>
                                telegramAPI: ${!!window.telegramAPI}<br>
                                uiComponents: ${!!window.uiComponents}<br>
                                performanceOptimizer: ${!!window.performanceOptimizer}
                            </p>
                            <button onclick="location.reload()" class="btn-reload">
                                –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
                            </button>
                        </div>
                    `;
                }
            }
        });
    </script>
</body>
</html> 