<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="Cache-Control" content="no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>–ê–≤—Ç–æ–ó–∞–ø—á–∞—Å—Ç–∏63 - Telegram MiniApp</title>

    <!-- –®—Ä–∏—Ñ—Ç—ã -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@800&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- –°—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="main.css">

    <!-- Telegram Web App -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <!-- –û—Ç–ª–∞–¥–∫–∞ -->
    <script>
        window.debugLog = function(message) {
            console.log(message);
            const debugLogs = document.getElementById('debug-logs');
            if (debugLogs) {
                const log = document.createElement('div');
                log.className = 'debug-log';
                log.textContent = `${new Date().toISOString()}: ${message}`;
                debugLogs.appendChild(log);
                debugLogs.scrollTop = debugLogs.scrollHeight;
            }
        }
    </script>
</head>
<body>
    <!-- –≠–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-logo">
            <svg class="gear-svg" viewBox="0 0 100 100" width="150" height="150">
                <circle class="gear-base" cx="50" cy="50" r="45" fill="#FF6B35"/>
                <g class="gear-teeth">
                    <path d="M50 5 L55 0 L60 5 L55 10 Z" class="gear-tooth"/>
                    <path d="M71 11 L78 8 L80 14 L73 17 Z" class="gear-tooth"/>
                    <path d="M89 29 L95 29 L93 35 L87 33 Z" class="gear-tooth"/>
                    <path d="M95 50 L100 52 L95 57 L90 53 Z" class="gear-tooth"/>
                    <path d="M89 71 L95 74 L90 79 L85 75 Z" class="gear-tooth"/>
                    <path d="M71 89 L75 95 L69 97 L66 91 Z" class="gear-tooth"/>
                    <path d="M50 95 L53 100 L47 100 L45 95 Z" class="gear-tooth"/>
                    <path d="M29 89 L26 95 L20 93 L24 87 Z" class="gear-tooth"/>
                    <path d="M11 71 L8 75 L5 71 L9 67 Z" class="gear-tooth"/>
                    <path d="M5 50 L0 53 L0 47 L5 45 Z" class="gear-tooth"/>
                    <path d="M11 29 L5 26 L7 20 L13 24 Z" class="gear-tooth"/>
                    <path d="M29 11 L25 5 L31 3 L34 9 Z" class="gear-tooth"/>
                </g>
                <circle cx="50" cy="50" r="35" fill="#1E3D59"/>
                <circle cx="50" cy="50" r="25" fill="#FF6B35"/>
                <circle cx="50" cy="50" r="15" fill="#1E3D59"/>
                <circle cx="50" cy="50" r="8" fill="#FFFFFF"/>
            </svg>
            <h1 class="brand-title">Auto<span>63</span></h1>
            <div class="loading-progress">
                <div class="loading-bar"></div>
            </div>
        </div>
        <div id="debug-logs" class="debug-logs"></div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
    <div id="app" class="app-container" style="display: none;">
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <nav class="nav-bar">
            <button class="nav-btn btn-back">
                <span class="nav-icon">‚Üê</span>
            </button>
            <div class="nav-title">–ê–≤—Ç–æ–ó–∞–ø—á–∞—Å—Ç–∏63</div>
            <div class="nav-actions">
                <button id="search-btn" class="nav-btn" data-screen="search">
                    <span class="nav-icon">üîç</span>
                </button>
                <button id="cart-btn" class="nav-btn" data-screen="cart">
                    <span class="nav-icon">üõí</span>
                    <span class="badge" id="cart-badge">0</span>
                </button>
                <button id="profile-btn" class="nav-btn" data-screen="profile">
                    <span class="nav-icon">üë§</span>
                </button>
            </div>
        </nav>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <main class="main-content">
            <!-- –î–æ–º–∞—à–Ω–∏–π —ç–∫—Ä–∞–Ω -->
            <section id="home-screen" class="screen">
                <div class="welcome-banner">
                    <h1>–ê–≤—Ç–æ–∑–∞–ø—á–∞—Å—Ç–∏<br>—Å –¥–æ—Å—Ç–∞–≤–∫–æ–π</h1>
                    <p>–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –∑–∞–ø—á–∞—Å—Ç–∏ –¥–ª—è –≤–∞—à–µ–≥–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—è</p>
                </div>

                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                <div class="quick-stats">
                    <div class="stat-item">
                        <span class="stat-value">5+</span>
                        <span class="stat-label">–õ–µ—Ç –æ–ø—ã—Ç–∞</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value">1000+</span>
                        <span class="stat-label">–ó–∞–ø—á–∞—Å—Ç–µ–π</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value">24/7</span>
                        <span class="stat-label">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</span>
                    </div>
                </div>

                <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
                <div class="categories-section">
                    <h2>–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h2>
                    <div class="categories-grid">
                        <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                    </div>
                </div>

                <!-- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã -->
                <div class="featured-section">
                    <h2>–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã</h2>
                    <div class="products-grid">
                        <!-- –¢–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                    </div>
                </div>
            </section>

            <!-- –û—Å—Ç–∞–ª—å–Ω—ã–µ —ç–∫—Ä–∞–Ω—ã -->
            <section id="category-screen" class="screen">
                <div class="category-header"></div>
                <div class="products-grid"></div>
            </section>

            <section id="product-screen" class="screen">
                <div class="product-detail"></div>
            </section>

            <section id="cart-screen" class="screen">
                <div class="cart-items"></div>
                <div class="cart-summary"></div>
            </section>

            <section id="profile-screen" class="screen">
                <div class="profile-info"></div>
                <div class="profile-actions"></div>
            </section>

            <section id="orders-screen" class="screen">
                <div class="orders-list"></div>
            </section>

            <section id="search-screen" class="screen">
                <div class="search-container">
                    <input type="text" class="search-input" placeholder="–ü–æ–∏—Å–∫ –∑–∞–ø—á–∞—Å—Ç–µ–π...">
                    <div class="search-results"></div>
                </div>
            </section>

            <section id="checkout-screen" class="screen">
                <div class="checkout-container">
                    <!-- –§–æ—Ä–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ —á–µ—Ä–µ–∑ JavaScript -->
                </div>
            </section>
        </main>
    </div>

    <!-- –°–∫—Ä–∏–ø—Ç—ã -->
    <script>
        // –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤
        function loadScript(src) {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = src;
                script.onload = () => {
                    window.debugLog(`–ó–∞–≥—Ä—É–∂–µ–Ω —Å–∫—Ä–∏–ø—Ç: ${src}`);
                    resolve();
                };
                script.onerror = () => {
                    window.debugLog(`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–∞: ${src}`);
                    reject(new Error(`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–∞: ${src}`));
                };
                document.body.appendChild(script);
            });
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        async function initApp() {
            try {
                window.debugLog('–ù–∞—á–∞–ª–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è');

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º Telegram WebApp
                if (!window.Telegram?.WebApp) {
                    throw new Error('Telegram WebApp –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω');
                }

                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º WebApp
                window.Telegram.WebApp.ready();
                window.debugLog('Telegram WebApp –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–∫—Ä–∏–ø—Ç—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
                await loadScript('data.js');
                await loadScript('components/Cart.js');
                await loadScript('components/Profile.js');
                await loadScript('components/Checkout.js');
                await loadScript('app.js');

                window.debugLog('–í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã');

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
                const loadingScreen = document.getElementById('loading-screen');
                const app = document.getElementById('app');
                
                if (loadingScreen && app) {
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
                    app.style.display = 'block';
                    app.style.opacity = '0';
                    
                    // –î–∞–µ–º –≤—Ä–µ–º—è –Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é
                    setTimeout(() => {
                        // –ü–ª–∞–≤–Ω–æ —Å–∫—Ä—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
                        loadingScreen.style.opacity = '0';
                        loadingScreen.style.transition = 'opacity 0.5s ease';
                        
                        // –ü–ª–∞–≤–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
                        app.style.opacity = '1';
                        app.style.transition = 'opacity 0.5s ease';
                        
                        // –£–¥–∞–ª—è–µ–º —ç–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
                        setTimeout(() => {
                            loadingScreen.remove();
                            window.debugLog('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ');
                        }, 500);
                    }, 1000);
                }

            } catch (error) {
                window.debugLog(`–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏: ${error.message}`);
                const loadingScreen = document.getElementById('loading-screen');
                if (loadingScreen) {
                    loadingScreen.innerHTML = `
                        <div class="error-message">
                            <h2>–û—à–∏–±–∫–∞</h2>
                            <p>${error.message}</p>
                            <button onclick="location.reload()" class="btn btn-accent">
                                –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞
                            </button>
                        </div>
                    `;
                }
            }
        }

        // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ DOM
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>